<!DOCTYPE html>
<html lang="en">
<head>
    <title>Header</title>
</head>
<body>
    <div class="header-container">
        <div class="header-content">
            <div class="header-logo">
                LOGO HERE
            </div>
            <div class="header-search">
                <form id="form" autocomplete="off">
                    <div class="search-container">
                        <input class="search-input" type="text" id="query" name="query" placeholder="Type what you need...">
                        <button class="search-button" type="submit">Search</button>                        
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        const Controller = {
            search: (ev) => {
                ev.preventDefault();
                const data = Object.fromEntries(new FormData(form));
                const response = fetch(`/search?q=${data.query}`).then((response) => {
                    response.json().then((results) => {
                        if (!results) {
                            noResult.innerHTML = `
                            <div class="no-result-container">
                                <h1 class="no-result-title">Sorry</h1>
                                Theres no result for <b>"${data.query}"</b>
                            </div>
                            `
                            return
                        }
                        Controller.updateList(results);
                    });
                });
            },

            updateList: (results) => {
                const rows = [];
                for (let result of results) {
                    rows.push(
                        `
                            <div class="card-container">
                                <p class="card-title">${result.title}</p>
                                <p>${result.content}</p>
                            </div>
                        `
                    );
                }
                resultList.innerHTML = rows.join(" ");
            },
        };

        const form = document.getElementById("form");
        form.addEventListener("submit", Controller.search);
    </script>
</body>
</html>